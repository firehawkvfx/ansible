---
# tasks file for ansible/roles/get_host_ip
- name: get host ip
  shell: |
    ifconfig eth1 | grep -Eo 'inet (addr:)?([0-9]*\.){3}[0-9]*' | grep -Eo '([0-9]*\.){3}[0-9]*' | grep -v '127.0.0.1'
  register: output

- name: set ip
  set_fact:
    host_ip: "{{ output.stdout_lines[0] | ipaddr }}"

- name: show output
  debug:
    var: host_ip
  failed_when: host_ip == false

